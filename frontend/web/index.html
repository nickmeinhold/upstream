<!DOCTYPE html>
<html>
<head>
  <!-- Use ./ for WebOS file:// protocol compatibility -->
  <base href="./">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="Downstream - What's new on streaming?">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Downstream">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>Downstream</title>
  <link rel="manifest" href="manifest.json">
</head>
<body tabindex="0">
  <!-- Firebase SDK - load before Flutter -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  <!-- HLS.js for video streaming -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC2F5V3YV8RNDTXdVyp7t654W72TeSdgWQ",
      authDomain: "downstream-181e2.firebaseapp.com",
      projectId: "downstream-181e2",
      storageBucket: "downstream-181e2.firebasestorage.app",
      messagingSenderId: "482686216746",
      appId: "1:482686216746:web:ff188b73bd4df1e26e3153"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

  <!-- TV Remote D-Pad Support -->
  <script>
    // Ensure Flutter canvas gets focus for keyboard input
    window.addEventListener('load', function() {
      // Wait for Flutter to initialize
      setTimeout(function() {
        var glassPane = document.querySelector('flt-glass-pane');
        if (glassPane) {
          glassPane.setAttribute('tabindex', '0');
          glassPane.focus();
        }
      }, 1000);
    });

    // Re-focus Flutter canvas when clicking anywhere
    document.addEventListener('click', function() {
      var glassPane = document.querySelector('flt-glass-pane');
      if (glassPane) {
        glassPane.focus();
      }
    });

    // Prevent default browser behavior for arrow keys and back button
    document.addEventListener('keydown', function(e) {
      // Arrow keys, Enter, Space, Back
      if ([37, 38, 39, 40, 13, 32, 461, 10009, 8].includes(e.keyCode)) {
        e.preventDefault();
      }
    });
  </script>

  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
